# 🤖 بوت WhatsApp لإدارة الوظائف

## 📋 نظرة عامة على المشروع

هذا المشروع عبارة عن بوت WhatsApp ذكي لإدارة وعرض الوظائف المتاحة، مع لوحة تحكم إدارية شاملة. البوت يستجيب للرسائل تلقائياً ويقدم قائمة الوظائف حسب الفئات المختلفة.

### ✨ المميزات الرئيسية

- 🤖 بوت WhatsApp ذكي مع معالجة رسائل ديناميكية
- 📊 لوحة تحكم إدارية شاملة (Dashboard)
- 🗄️ قاعدة بيانات SQLite للبيانات
- 📱 QR Code ديناميكي للاتصال بـ WhatsApp
- 🌙 وضع الظلام (Dark Mode) في لوحة التحكم
- 🔄 إدارة ديناميكية للفئات والوظائف
- 📝 رسائل قابلة للتخصيص
- 🔢 دعم الأرقام العربية والإنجليزية

## 🏗️ هيكل المشروع

```
whatsjob-bot/
├── server/
│   ├── server.js          # السيرفر الرئيسي
│   ├── routes.js          # مسارات API
│   └── whatsappBot.js     # بوت WhatsApp
├── bot/
│   └── messageHandler.js  # معالج الرسائل الذكي
├── dashboard/
│   ├── routes.js          # مسارات لوحة التحكم
│   ├── views/             # صفحات EJS
│   │   └── dashboard/
│   │       ├── index.ejs      # الصفحة الرئيسية
│   │       ├── settings.ejs   # صفحة الإعدادات
│   │       ├── categories.ejs # صفحة الفئات
│   │       └── jobs.ejs       # صفحة الوظائف
│   └── style.css          # ملفات CSS
├── db/
│   ├── init.js            # إنشاء قاعدة البيانات
│   ├── jobs.db            # قاعدة البيانات
│   └── last-qr.txt        # آخر QR Code
├── package.json           # إعدادات المشروع
└── README_AR.md          # هذا الملف
```

## 🚀 طريقة التثبيت والتشغيل

### 1️⃣ تثبيت المتطلبات

```bash
# الانتقال إلى مجلد المشروع
cd whatsjob-bot

# تثبيت الحزم المطلوبة
npm install
```

### 2️⃣ إنشاء قاعدة البيانات

```bash
# إنشاء قاعدة البيانات والجداول
npm run init-db
```

### 3️⃣ تشغيل البوت

```bash
# تشغيل البوت في وضع التطوير
npm run dev

# أو تشغيل البوت في وضع الإنتاج
npm start
```

## 📱 كيفية استخدام البوت

### 🔗 الاتصال بـ WhatsApp

1. شغل البوت باستخدام `npm run dev`
2. افتح المتصفح على `http://localhost:3000/dashboard`
3. اضغط على زر "عرض QR Code" في لوحة التحكم
4. امسح QR Code باستخدام تطبيق WhatsApp على هاتفك
5. البوت جاهز للاستخدام!

### 💬 استخدام البوت

- اكتب **"وظائف"** للحصول على قائمة الفئات
- اختر رقم الفئة المطلوبة (1-6 أو أكثر حسب الإعداد)
- ستحصل على قائمة الوظائف مع روابط التقديم

## 🛠️ لوحة التحكم الإدارية

### 🌐 الوصول للوحة التحكم

```
http://localhost:3000/dashboard
```

### 📊 الأقسام المتاحة

#### 1️⃣ الصفحة الرئيسية
- عرض إحصائيات سريعة
- QR Code للاتصال
- روابط سريعة للأقسام

#### 2️⃣ الإعدادات
- رسالة الترحيب
- رسالة القائمة الرئيسية
- رسائل الخطأ والتذكير

#### 3️⃣ الفئات
- إضافة فئات جديدة
- تعديل الفئات الموجودة
- حذف الفئات
- ترتيب الفئات

#### 4️⃣ الوظائف
- إضافة وظائف جديدة
- تعديل الوظائف
- حذف الوظائف
- تنظيم الوظائف حسب الفئات

## ⚡ الأوامر المهمة في PowerShell

### 🔄 تشغيل البوت

```powershell
# الانتقال لمجلد المشروع
cd whatsjob-bot

# تشغيل البوت في وضع التطوير
npm run dev

# أو تشغيل البوت في وضع الإنتاج
npm start
```

### 🛑 إيقاف البوت

```powershell
# إيقاف جميع عمليات Node.js
taskkill /IM node.exe /F

# أو إيقاف عمليات nodemon فقط
taskkill /IM nodemon.exe /F
```

### 🗑️ حذف الجلسات والبيانات

```powershell
# حذف بيانات جلسات WhatsApp
Remove-Item -Recurse -Force .wwebjs_auth

# حذف ملف QR Code القديم
Remove-Item -Force db/last-qr.txt
```

### 🔄 إعادة إنشاء قاعدة البيانات

```powershell
# حذف قاعدة البيانات القديمة وإنشاء جديدة
npm run init-db
```

### 📦 إعادة تثبيت الحزم

```powershell
# حذف node_modules وإعادة التثبيت
Remove-Item -Recurse -Force node_modules
npm install
```

## 🗄️ قاعدة البيانات

### 📋 الجداول

#### 1️⃣ جدول `settings`
```sql
CREATE TABLE settings (
    key TEXT PRIMARY KEY,
    value TEXT NOT NULL
);
```

#### 2️⃣ جدول `categories`
```sql
CREATE TABLE categories (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    ordering INTEGER NOT NULL
);
```

#### 3️⃣ جدول `jobs`
```sql
CREATE TABLE jobs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    url TEXT NOT NULL,
    category_id INTEGER NOT NULL,
    FOREIGN KEY (category_id) REFERENCES categories(id)
);
```

## 🔧 الإعدادات المتاحة

| المفتاح | الوصف | القيمة الافتراضية |
|---------|--------|-------------------|
| `welcome_message` | رسالة الترحيب | "مرحباً! اكتب 'وظائف' للحصول على قائمة الوظائف المتاحة." |
| `invalid_keyword_message` | رسالة الخطأ عند كلمة خاطئة | "الرجاء كتابة كلمة 'وظائف' بالشكل الصحيح." |
| `menu_header` | عنوان قائمة الفئات | "📋 قائمة الوظائف المتاحة\nاختر نوع الوظائف:" |
| `menu_footer` | تذييل قائمة الفئات | "ادخل رقم الفئة" |
| `invalid_selection_message` | رسالة الاختيار الخاطئ | "الرجاء إدخال اختيار صحيح." |

## 🌙 وضع الظلام (Dark Mode)

لوحة التحكم تدعم وضع الظلام مع:
- تبديل سلس بين الوضعين
- حفظ التفضيل في المتصفح
- تصميم متجاوب لجميع الأجهزة

## 🔢 دعم الأرقام العربية

البوت يدعم كلاً من:
- الأرقام الإنجليزية: 1, 2, 3, 4, 5, 6
- الأرقام العربية: ١, ٢, ٣, ٤, ٥, ٦

## 🚨 استكشاف الأخطاء

### مشاكل شائعة وحلولها

#### 1️⃣ البوت لا يستجيب
```powershell
# إعادة تشغيل البوت
taskkill /IM node.exe /F
npm run dev
```

#### 2️⃣ QR Code لا يظهر
```powershell
# حذف بيانات الجلسة وإعادة المحاولة
Remove-Item -Recurse -Force .wwebjs_auth
npm run dev
```

#### 3️⃣ خطأ في قاعدة البيانات
```powershell
# إعادة إنشاء قاعدة البيانات
npm run init-db
```

#### 4️⃣ مشاكل في الحزم
```powershell
# إعادة تثبيت الحزم
Remove-Item -Recurse -Force node_modules
npm install
```

## 📞 الدعم والمساعدة

إذا واجهت أي مشاكل:

1. تأكد من تثبيت Node.js الإصدار 14 أو أحدث
2. تأكد من وجود اتصال بالإنترنت
3. تحقق من إعدادات الجدار الناري
4. تأكد من صحة بيانات قاعدة البيانات

## 🎯 المميزات المستقبلية

- [ ] دعم متعدد اللغات
- [ ] إحصائيات مفصلة للاستخدام
- [ ] نظام تنبيهات للمشرفين
- [ ] دعم الملفات والصور
- [ ] نظام تقييم الوظائف
- [ ] إشعارات فورية للوظائف الجديدة

---

**تم تطوير هذا المشروع باستخدام:**
- Node.js & Express
- SQLite Database
- WhatsApp Web.js
- EJS Templates
- Bootstrap CSS

**المطور:** فريق التطوير
**الإصدار:** 1.0.0
**تاريخ التحديث:** 2024
